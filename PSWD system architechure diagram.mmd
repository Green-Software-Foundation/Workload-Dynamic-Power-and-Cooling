```mermaid
graph TB
    %% External Systems
    subgraph EXTERNAL[" External Systems "]
        GRID["üåê Grid Operators<br/>‚Ä¢ Load Forecasting<br/>‚Ä¢ Demand Response<br/>‚Ä¢ IEC 61850-90-4"]
        MUNICIPAL["üèòÔ∏è Municipal Utilities<br/>‚Ä¢ District Heating<br/>‚Ä¢ Waste Heat Recovery<br/>‚Ä¢ 70-90¬∞C Supply"]
        RENEWABLE["üå± Renewable Sources<br/>‚Ä¢ Solar/Wind Generation<br/>‚Ä¢ Carbon Intensity Data<br/>‚Ä¢ Generation Forecasts"]
    end

    %% PSWD Four-Layer Architecture
    subgraph PSWD[" PSWD System Architecture "]
        
        %% External Integration Layer
        subgraph EIL[" üîó External Integration Layer "]
            GRID_INT["Grid Integration<br/>‚Ä¢ Real-time Coordination<br/>‚Ä¢ Demand Response<br/>‚Ä¢ Frequency Regulation"]
            CARBON_OPT["Carbon Optimization<br/>‚Ä¢ Renewable Tracking<br/>‚Ä¢ Workload Scheduling<br/>‚Ä¢ Emissions Reporting"]
            HEAT_COORD["Heat Coordination<br/>‚Ä¢ Municipal Integration<br/>‚Ä¢ Temperature Control<br/>‚Ä¢ Flow Management"]
        end

        %% Infrastructure Control Layer
        subgraph ICL[" üèóÔ∏è Infrastructure Control Layer "]
            POWER_CTRL["Power Management<br/>‚Ä¢ Load Balancing<br/>‚Ä¢ Peak Shaving<br/>‚Ä¢ Emergency Response"]
            BATTERY_CTRL["Battery Systems<br/>‚Ä¢ Energy Storage<br/>‚Ä¢ Load Smoothing<br/>‚Ä¢ <250ms Response"]
            THERMAL_CTRL["Thermal Management<br/>‚Ä¢ Cooling Control<br/>‚Ä¢ Heat Recovery<br/>‚Ä¢ Phase Change"]
            PREDICT["Predictive Engine<br/>‚Ä¢ Load Analytics<br/>‚Ä¢ Capacity Planning<br/>‚Ä¢ AI Optimization"]
        end

        %% Hardware Abstraction Layer
        subgraph HAL[" üîß Hardware Abstraction Layer "]
            BMC["Enhanced BMC<br/>‚Ä¢ Redfish Extensions<br/>‚Ä¢ Sub-second Monitoring<br/>‚Ä¢ Sensor Aggregation"]
            POWER_MON["Power Monitoring<br/>‚Ä¢ 100ms Resolution<br/>‚Ä¢ ¬±0.5% Accuracy<br/>‚Ä¢ Quality Metrics"]
            THERMAL_SEN["Thermal Sensors<br/>‚Ä¢ ¬±0.1¬∞C Temperature<br/>‚Ä¢ ¬±1% Flow Rate<br/>‚Ä¢ ¬±0.25% Pressure"]
            COOLING_HW["Cooling Hardware<br/>‚Ä¢ Single/Two-Phase<br/>‚Ä¢ Liquid Circulation<br/>‚Ä¢ Heat Exchangers"]
        end

        %% Workload Interface Layer
        subgraph WIL[" üíª Workload Interface Layer "]
            WORKLOAD_API["Workload API<br/>‚Ä¢ Event-driven Messaging<br/>‚Ä¢ <500ms Response<br/>‚Ä¢ JSON/JWT Security"]
            SCHEDULER["Scheduler Integration<br/>‚Ä¢ Kubernetes<br/>‚Ä¢ Resource Managers<br/>‚Ä¢ Container Orchestration"]
            FLEXIBILITY["Flexibility Management<br/>‚Ä¢ Throttling Control<br/>‚Ä¢ Migration Support<br/>‚Ä¢ Priority Handling"]
        end

    end

    %% Computational Workloads
    subgraph WORKLOADS[" üß† Computational Workloads "]
        AI_TRAIN["ü§ñ AI Training<br/>‚Ä¢ 200+ MW Swings<br/>‚Ä¢ 40ms Transitions<br/>‚Ä¢ Critical Priority"]
        AI_INFER["‚ö° AI Inference<br/>‚Ä¢ Real-time Serving<br/>‚Ä¢ Variable Load<br/>‚Ä¢ Low Latency"]
        HPC["üî¨ HPC Applications<br/>‚Ä¢ Scientific Computing<br/>‚Ä¢ Batch Processing<br/>‚Ä¢ Predictable Load"]
        TRADITIONAL["üñ•Ô∏è Traditional Compute<br/>‚Ä¢ Web Services<br/>‚Ä¢ Databases<br/>‚Ä¢ Steady State"]
    end

    %% Physical Infrastructure
    subgraph PHYSICAL[" ‚öôÔ∏è Physical Infrastructure "]
        POWER_DIST["Power Distribution<br/>‚Ä¢ 1MW - 1000MW<br/>‚Ä¢ Transformers<br/>‚Ä¢ UPS Systems"]
        BATTERY_PHYS["Battery Storage<br/>‚Ä¢ Li-ion Arrays<br/>‚Ä¢ Inverters<br/>‚Ä¢ Safety Systems"]
        COOLING_SYS["Cooling Systems<br/>‚Ä¢ Liquid Loops<br/>‚Ä¢ Heat Exchangers<br/>‚Ä¢ Municipal Integration"]
        FACILITIES["Building Systems<br/>‚Ä¢ HVAC Integration<br/>‚Ä¢ Fire Safety<br/>‚Ä¢ Environmental Control"]
    end

    %% Security Framework (Cross-cutting)
    subgraph SECURITY[" üîí Security Framework "]
        AUTH["Authentication<br/>‚Ä¢ X.509 Certificates<br/>‚Ä¢ JWT Tokens<br/>‚Ä¢ Role-based Access"]
        ENCRYPTION["Message Security<br/>‚Ä¢ TLS 1.3<br/>‚Ä¢ HMAC-SHA256<br/>‚Ä¢ Digital Signatures"]
        NETWORK_SEC["Network Security<br/>‚Ä¢ VLAN Isolation<br/>‚Ä¢ Intrusion Detection<br/>‚Ä¢ Emergency Disconnect"]
    end

    %% External System Connections
    GRID <--> GRID_INT
    MUNICIPAL <--> HEAT_COORD
    RENEWABLE --> CARBON_OPT

    %% External Integration to Infrastructure Control
    GRID_INT --> POWER_CTRL
    CARBON_OPT --> PREDICT
    HEAT_COORD --> THERMAL_CTRL
    GRID_INT <--> BATTERY_CTRL

    %% Infrastructure Control Layer Internal
    POWER_CTRL <--> BATTERY_CTRL
    POWER_CTRL <--> THERMAL_CTRL
    PREDICT --> POWER_CTRL
    PREDICT --> THERMAL_CTRL
    PREDICT --> BATTERY_CTRL

    %% Infrastructure Control to Hardware Abstraction
    POWER_CTRL <--> POWER_MON
    BATTERY_CTRL <--> BMC
    THERMAL_CTRL <--> THERMAL_SEN
    THERMAL_CTRL <--> COOLING_HW
    PREDICT <-- POWER_MON
    PREDICT <-- THERMAL_SEN

    %% Hardware Abstraction to Physical
    POWER_MON <--> POWER_DIST
    BMC <--> BATTERY_PHYS
    THERMAL_SEN <--> COOLING_SYS
    COOLING_HW <--> COOLING_SYS
    THERMAL_SEN <--> FACILITIES

    %% Workload Interface to Infrastructure Control
    WORKLOAD_API <--> POWER_CTRL
    WORKLOAD_API <--> THERMAL_CTRL
    WORKLOAD_API <--> PREDICT
    SCHEDULER --> WORKLOAD_API
    FLEXIBILITY --> WORKLOAD_API

    %% Workloads to Interface
    AI_TRAIN --> WORKLOAD_API
    AI_INFER --> WORKLOAD_API
    HPC --> WORKLOAD_API
    TRADITIONAL --> WORKLOAD_API

    %% Security Integration (Cross-cutting)
    AUTH -.-> WORKLOAD_API
    AUTH -.-> GRID_INT
    ENCRYPTION -.-> WORKLOAD_API
    ENCRYPTION -.-> GRID_INT
    NETWORK_SEC -.-> BMC
    NETWORK_SEC -.-> POWER_MON

    %% Critical Path and Performance Indicators
    style AI_TRAIN fill:#ff9999,stroke:#ff0000,stroke-width:3px
    style POWER_MON fill:#ff9999,stroke:#ff0000,stroke-width:2px
    style BATTERY_CTRL fill:#ff9999,stroke:#ff0000,stroke-width:2px
    
    style WORKLOAD_API fill:#99ff99,stroke:#00aa00,stroke-width:2px
    style BMC fill:#99ff99,stroke:#00aa00,stroke-width:2px
    style THERMAL_SEN fill:#99ff99,stroke:#00aa00,stroke-width:2px
    
    style GRID fill:#9999ff,stroke:#0000ff,stroke-width:2px
    style MUNICIPAL fill:#9999ff,stroke:#0000ff,stroke-width:2px
    style RENEWABLE fill:#9999ff,stroke:#0000ff,stroke-width:2px
    
    style AUTH fill:#ffff99,stroke:#ffaa00,stroke-width:2px
    style ENCRYPTION fill:#ffff99,stroke:#ffaa00,stroke-width:2px
    style NETWORK_SEC fill:#ffff99,stroke:#ffaa00,stroke-width:2px

    %% Response Time Annotations
    WORKLOAD_API -.- |"<500ms"| POWER_CTRL
    POWER_MON -.- |"100ms"| PREDICT
    BATTERY_CTRL -.- |"<250ms"| BATTERY_PHYS
    THERMAL_CTRL -.- |"<1s"| COOLING_SYS
    GRID_INT -.- |"<5s"| GRID
```
